@model IEnumerable<Pepe100.ViewModels.TyontekijatViewModel>

<h1 style="color:lightpink">NurseBid</h1>

@section scripts{

	<script type="text/javascript">
		$(window).on('load', function () {
			if (@ViewBag.HyvaksyTarjousError == 1) {
				$('#HyvaksyTarjousRuutu').modal('show');
			}
		});
	</script>
}
@{if (ViewBag.HyvaksyTarjousError == 1)
	{ Html.RenderPartial("_HyvaksyVuoro"); }
}
@{if (ViewBag.Info == 1)
	{ Html.RenderPartial("_InfoRuutu"); }
}

<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
@*<style>
	/* Popover */
	.popover {
		border: 2px dotted red;
		max-width: 200px;
		max-height: 200px;
	}
	/* Popover Header */
	.popover-title {
		background-color: #73AD21;
		color: #FFFFFF;
		font-size: 28px;
		text-align: center;
		max-width: 200px;
		max-height: 200px;
	}
	/* Popover Body */
	.popover-content {
		background-color: coral;
		color: #FFFFFF;
		padding: 25px;
	}
	/* Popover Arrow */
	.arrow {
		border-right-color: red !important;
	}
</style>*@
<script>
	$(document).ready(function () {
		$('[data-toggle="popover"]').popover({
			html: true,
			sanitize: false,
			trigger: "hover"
		});
	});
</script>


<table class="table">
	<tr>
		<th></th>
		@*<th>@Html.DisplayNameFor(model => model.Kuva)</th>*@
		@*<th></th>*@
		<th>@Html.DisplayNameFor(model => model.TyoID)</th>
		<th>@Html.DisplayNameFor(model => model.Etunimi)</th>
		<th>
			@Html.DisplayNameFor(model => model.VastaTarjousHinta)
			@*@Html.DisplayName("Tarjoushinta")*@
		</th>
		<th></th>
	</tr>

	@foreach (var item in Model)
	{
		using (Html.BeginForm("KatsoTarjouksia", "Yritys", FormMethod.Post))
		{
			@Html.AntiForgeryToken()
			@Html.ValidationSummary(true, "", new { @class = "text-danger" })
			@Html.HiddenFor(modelItem => item.TyoID)
			<tr>
				<td>
					<a href="#" data-toggle="popover" title="@if (item.Kuva != null)
					{<img src='data:image/jpeg;base64,@Convert.ToBase64String(item.Kuva)'width=100% height=100%/>}
					else{  }" 
					   data-content="<table><thead><th>Etunimi</th><th>Sukunimi</th><th>Email</th>@if (item.LOP == true)
				{
					<th>LOP</th>
				}</thead><tbody><td>@item.Etunimi</td><td>@item.Sukunimi</td><td>@item.Email</td>@if (item.LOP == true)
				{
					<td>@item.LOP</td>
				}</tbody><thead><th>Etunimi</th><th>Sukunimi</th><th>Email</th>@if (item.LOP == true)
				{
					<th>LOP</th>
				}</thead><tbody><td>@item.Etunimi</td><td>@item.Sukunimi</td><td>@item.Email</td>@if (item.LOP == true)
				{
					<td>@item.LOP</td>
				}</tbody></table>">Toggle popover</a>
				</td>
				<td>@Html.DisplayFor(modelItem => item.TyoID, new { htmlAttributes = new { @class = "form-control" } })</td>
				<td>@Html.DisplayFor(modelItem => item.Etunimi, new { htmlAttributes = new { @class = "form-control" } })</td>
				<td>@Html.DisplayFor(modelItem => item.VastaTarjousHinta, new { htmlAttributes = new { @class = "form-control" } })</td>
				<td>
					<a href="@Url.Action("_HyvaksyTarjous", "Yritys", new { tyoid = item.TyoID,henid = item.HenkiloID, vhinta = item.VastaTarjousHinta })" style="font-weight:600; color:lightblue">HYVÄKSY</a>
					<a href="@Url.Action("KatsoTarjouksia", "Yritys", new { henkid = item.HenkiloID })" style="font-weight:600; color:lightblue">KATSO</a>
				</td>
			</tr>
		}
	}
</table>

